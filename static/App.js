import v,{useRef as p,useMemo as E,useCallback as t,useEffect as m}from"../snowpack/pkg/react.js";import{WebGLRenderer as f}from"../snowpack/pkg/three.js";import{Rho as k}from"./scripts/rho.js";export const App=()=>{const r=p(null),e=E(()=>new k,[]),s=t(n=>{e.onKeyDown(n)},[e]),i=t(n=>{e.onMouseClick(n)},[e]),d=t(n=>{e.onMouseMove(n.clientX,n.clientY)},[e]),c=t(n=>{e.onMouseDown(n)},[e]),w=t(n=>{e.onResize()},[e]);return m(()=>(window.addEventListener("mousemove",d),window.addEventListener("keydown",s),window.addEventListener("mousedown",c),window.addEventListener("click",i),window.addEventListener("resize",w),()=>{window.removeEventListener("mousemove",d),window.removeEventListener("keydown",s),window.removeEventListener("mousedown",c),window.removeEventListener("click",i),window.removeEventListener("resize",w)}),[s,i,d,c,w]),m(()=>{if(!r.current)return;const n=r.current,o=new f;return n.appendChild(o.domElement),e.init(o),()=>{o.dispose(),n.removeChild(o.domElement)}},[r,e]),m(()=>{let n=-1,o=-1/60;const a=l=>{const u=(l-o)/1e3;e.update(u),e.render(u),o=l,n=requestAnimationFrame(a)};return a(o),()=>{cancelAnimationFrame(n)}},[e]),v.createElement("div",{ref:r,className:"app w-full h-full"})};
